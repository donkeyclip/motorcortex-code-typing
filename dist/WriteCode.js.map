{"version":3,"sources":["../src/WriteCode.js"],"names":["MotorCortex","require","WriteCode","code","targetValue","split","latency","duration","length","fraction","ms","cloneArray","slice","splice","Math","floor","element","entity","flask","updateCode","join","textarea","focus","API","MonoIncident","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,IAAMA,WAAW,GAAGC,OAAO,CAAC,2BAAD,CAA3B;;IAEMC,S;;;;;;;;;;;;;mCACa;AACX,WAAKC,IAAL,GAAY,KAAKC,WAAL,CAAiBC,KAAjB,CAAuB,SAAvB,CAAZ;AACA,WAAKC,OAAL,GAAe,KAAKC,QAAL,GAAgB,KAAKJ,IAAL,CAAUK,MAAzC;AACH;;;+BAEUC,Q,EAAUC,E,EAAI;AACrB,UAAMC,UAAU,GAAG,KAAKR,IAAL,CAAUS,KAAV,EAAnB;AACA,UAAIT,IAAJ;;AACA,UAAIM,QAAQ,KAAK,CAAjB,EAAoB;AAChBN,QAAAA,IAAI,GAAGQ,UAAP;AACH,OAFD,MAGK,IAAID,EAAE,GAAG,KAAKJ,OAAd,EAAuB;AACxBH,QAAAA,IAAI,GAAG,EAAP;AACH,OAFI,MAGA;AACDA,QAAAA,IAAI,GAAGQ,UAAU,CAACE,MAAX,CAAkB,CAAlB,EAAqBC,IAAI,CAACC,KAAL,CAAWJ,UAAU,CAACH,MAAX,GAAoBC,QAA/B,CAArB,CAAP;AACH;;AACD,WAAKO,OAAL,CAAaC,MAAb,CAAoBC,KAApB,CAA0BC,UAA1B,CAAqChB,IAAI,CAACiB,IAAL,CAAU,EAAV,CAArC;AACA,WAAKJ,OAAL,CAAaC,MAAb,CAAoBI,QAApB,CAA6BC,KAA7B;AACH;;;sCAEiB;AACd,aAAO,EAAP;AACH;;;;EAxBmBtB,WAAW,CAACuB,GAAZ,CAAgBC,Y;;AA2BxCC,MAAM,CAACC,OAAP,GAAiBxB,SAAjB","sourcesContent":["const MotorCortex = require(\"@kissmybutton/motorcortex\");\n\nclass WriteCode extends MotorCortex.API.MonoIncident {\n    onGetContext() {\n        this.code = this.targetValue.split(/(?!\\s+)/);\n        this.latency = this.duration / this.code.length;\n    }\n\n    onProgress(fraction, ms) {\n        const cloneArray = this.code.slice();\n        let code;\n        if (fraction === 1) {\n            code = cloneArray;\n        }\n        else if (ms < this.latency) {\n            code = \"\";\n        }\n        else {\n            code = cloneArray.splice(0, Math.floor(cloneArray.length * fraction));\n        }\n        this.element.entity.flask.updateCode(code.join(\"\"));\n        this.element.entity.textarea.focus();\n    }\n\n    getScratchValue() {\n        return \"\";\n    }\n}\n\nmodule.exports = WriteCode;\n"],"file":"WriteCode.js"}